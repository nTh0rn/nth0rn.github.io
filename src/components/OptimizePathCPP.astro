---
type Props = {
  url: string;
  width: string;
};

import CodeBlock from "./CodeBlock.astro";

import { runHighlighterWithAstro } from '@astrojs/prism';



---
<style>
	.no-scrollbar::-webkit-scrollbar {
	display: none;
	}
	/* Hide scrollbar for IE, Edge and Firefox */
	.no-scrollbar {
	-ms-overflow-style: none;  /* IE and Edge */
	scrollbar-width: none;  /* Firefox */
	}
	.content {
	max-height: 0;
	overflow: hidden;
	transition: max-height 0.5s cubic-bezier(.85,.35,.15,.83);
	}
</style>
<div class="OptimizePathCPP group cursor-pointer justify-center flex">
  <div class="translate-y-[4px]">
    <div class="peer origin-center absolute dark:invert transition duration-200 w-[40px] h-[40px] group-[.is-selected]:rotate-90 opacity-100 group-[.is-selected]:opacity-0">
      <img width="40" height="40" src="/images/icons/plus.png" alt="down-squared--v2"
        class="w-[40px] h-[40px] m-0"/>
    </div>
    <div class="peer origin-center absolute dark:invert transition duration-200  w-[40px] h-[40px] group-[.is-selected]:rotate-90 rotate-0">
      <img width="42" height="42" src="/images/icons/minus.png" alt="down-squared--v2"
        class="w-[40px] h-[40px] m-0"/>
    </div>
  </div>
  <div class="ml-[50px] border-[#050505] dark:border-[#AAAAAA] rounded border-[1px] inline-block p-2 ">optimizePath() C++ Code</div>

</div>
<div class="content hue-rotate-180 dark:hue-rotate-0 invert dark:invert-0 cursor-auto" id="OptimizePathCPPText">

<pre class="code_syntax" style="color:#d1d1d1;background:#0F0F0F;"><span class="line_wrapper"><span style="color:#9999a9; ">/*</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    @brief Optimizing the initially found path.</span></span>
<span class="line_wrapper"><span style="color:#9999a9; "></span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    This function iterates through each cell in the path. For each cell, it iterates</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    backwards from the very end the path and checks whether the initial cell and any</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    of the cells after can see eachother. If they can, then any cells between them</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    are erased from the path list and the search restarts until no optimizations can</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">    be made.</span></span>
<span class="line_wrapper"><span style="color:#9999a9; ">*/</span></span>
<span class="line_wrapper"><span style="color:#e66170; font-weight:bold; ">void</span> optimizePath<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#9999a9; ">//Loop until the break is reached.</span></span>
<span class="line_wrapper">    <span style="color:#e66170; font-weight:bold; ">while</span><span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">true</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper"><span style="color:#e34adc; ">        optimizePathRestart:</span> <span style="color:#b060b0; ">;</span> <span style="color:#9999a9; ">//Used if the entire search needs to restart.</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        <span style="color:#9999a9; ">//Iterate forward from the start of the path.</span></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">for</span><span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">int</span> i <span style="color:#d2cd86; ">=</span> <span style="color:#008c00; ">0</span><span style="color:#b060b0; ">;</span> i <span style="color:#d2cd86; ">&lt;</span> path<span style="color:#d2cd86; ">.</span>size<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span> i<span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">            <span style="color:#9999a9; ">//Iterate backwards from the end of the path.</span></span>
<span class="line_wrapper">            <span style="color:#e66170; font-weight:bold; ">for</span><span style="color:#d2cd86; ">(</span><span style="color:#e66170; font-weight:bold; ">int</span> j <span style="color:#d2cd86; ">=</span> <span style="color:#008c00; ">1</span><span style="color:#b060b0; ">;</span> j <span style="color:#d2cd86; ">&lt;</span> path<span style="color:#d2cd86; ">.</span>size<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span> j<span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                <span style="color:#9999a9; ">//Makes sure it doesn't check past the forward-moving-cell.</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span><span style="color:#d2cd86; ">(</span>path<span style="color:#d2cd86; ">.</span>size<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">-</span> j <span style="color:#d2cd86; ">&lt;</span><span style="color:#d2cd86; ">=</span> i<span style="color:#d2cd86; ">+</span><span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper">                    <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">                <span style="color:#9999a9; ">//Checks whether the cells can see eachother.</span></span>
<span class="line_wrapper">                <span style="color:#e66170; font-weight:bold; ">if</span><span style="color:#d2cd86; ">(</span>canSee<span style="color:#d2cd86; ">(</span>path<span style="color:#d2cd86; ">[</span>i<span style="color:#d2cd86; ">]</span><span style="color:#d2cd86; ">,</span> path<span style="color:#d2cd86; ">[</span>path<span style="color:#d2cd86; ">.</span>size<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">-</span> j<span style="color:#d2cd86; ">]</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span> <span style="color:#b060b0; ">&lcub;</span></span>
<span class="line_wrapper">                    <span style="color:#9999a9; ">//Erase the cells between 2 cells that see eachother</span></span>
<span class="line_wrapper">                    path<span style="color:#d2cd86; ">.</span>erase<span style="color:#d2cd86; ">(</span>path<span style="color:#d2cd86; ">.</span>begin<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">+</span>i<span style="color:#d2cd86; ">+</span><span style="color:#008c00; ">1</span><span style="color:#d2cd86; ">,</span> path<span style="color:#d2cd86; ">.</span>begin<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">+</span><span style="color:#d2cd86; ">(</span>path<span style="color:#d2cd86; ">.</span>size<span style="color:#d2cd86; ">(</span><span style="color:#d2cd86; ">)</span> <span style="color:#d2cd86; ">-</span> j<span style="color:#d2cd86; ">)</span><span style="color:#d2cd86; ">)</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                    <span style="color:#e66170; font-weight:bold; ">goto</span> <span style="color:#e34adc; ">optimizePathRestart</span><span style="color:#b060b0; ">;</span></span>
<span class="line_wrapper">                <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">            <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper">        <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">        <span style="color:#e66170; font-weight:bold; ">break</span><span style="color:#b060b0; ">;</span> <span style="color:#9999a9; ">//Reached when no optimizations are found.</span></span>
<span class="line_wrapper"></span>
<span class="line_wrapper">    <span style="color:#b060b0; ">}</span></span>
<span class="line_wrapper"><span style="color:#b060b0; ">}</span></span></pre>
</div>
<script>
		function lookforCascade(cascClass, textClass) {
		  var coll = document.getElementsByClassName(cascClass);
		  var i;
		  
		  for (i = 0; i < coll.length; i++) {
		    coll[i].addEventListener("mouseup", function() {
		      this.classList.toggle("is-selected");
		      var content = document.getElementById(textClass);
		      if (content.style.maxHeight){
		        content.style.maxHeight = null;
		      } else {
		        content.style.maxHeight = content.scrollHeight + "px";
		      } 
		    });
		    
		  }
		}
		
		lookforCascade("OptimizePathCPP", "OptimizePathCPPText");
		
		
	</script>